
{% extends "midd19/layout.html" %}
{% load static %}

{% block title %} Chatforum{% endblock %}

{% block body %}

<div class="background-div">
<!--**********************liked/unliked posts area***************************-->
<div id="carouselExampleControls" class="carousel slide carousel-fade">
    <div class="carousel-inner">
        <!--**************************liked posts****************************-->
        <div class="carousel-item active most_liked">
            <div class="card-group" id="mostlikedcards">
                {%for p in most_liked%}
                <div class="card text-black mb-3 like-dislike">
                    <div class="card-body">
                        <a href="{{p.get_absolute_url_post}}" class="text-info"><h5 class="card-title">{{ p.title }}</h5></a>
                        {%if p.anonymous%}
                          <h6 class="card-subtitle mb-2 text-muted">Anonymous</h6>
                        {%else%}
                          <a href="{{p.get_absolute_url_user}}" class="text-info"><h6 class="card-subtitle mb-2">{{ p.user }}</h6></a>
                        {%endif%}
                        <p class="card-text">{{ p.content }}</p>
                        <a href="#" class="card-link text-info">countinue reading</a>
                    </div>
                    <div class="card-footer">
                        <span class="time-right post-time">{{ p.time }}</span>
                    </div>
                </div>
                {%endfor%}
                <button type="button" class="btn like-dislike-btn" style="margin-bottom: 15px; width: 80px; background-color: darkblue; border: 0px"><p style="transform: rotate(270deg)">Most unliked</p></button>
            </div>

        </div>
        <!--*************************unliked posts***************************-->
        <div class="carousel-item most_disliked">
            <div class="card-group" id="mostunlikedcards">
                {%for p in least_liked%}
                <div class="card text-black mb-3 like-dislike">
                    <div class="card-body">
                        <a href="{{p.get_absolute_url_post}}" class="text-info"><h5 class="card-title">{{ p.title }}</h5></a>
                        {%if p.anonymous%}
                          <h6 class="card-subtitle mb-2 text-muted">Anonymous</h6>
                        {%else%}
                          <a href="{{p.get_absolute_url_user}}" class="text-info"><h6 class="card-subtitle mb-2">{{ p.user }}</h6></a>
                        {%endif%}
                        <p class="card-text">{{ p.content }}</p>
                        <a href="#" class="card-link text-info">countinue reading</a>
                    </div>
                    <div class="card-footer">
                        <span class="time-right post-time">{{ p.time }}</span>
                    </div>
                </div>
                {%endfor%}
                <button type="button" class="btn btn-primary" id="test" style="margin-bottom: 15px; width: 80px; background-color: darkblue; border: 0px"><p style="transform: rotate(270deg)" class="like-dislike-btn">Most liked</p></button>
            </div>
        </div>
    </div>
    <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">  </a>
</div>

<!--***************************post form*************************************-->
<div class="container-fluid" id="post-form">
    <div class="row justify-content-center">
        <div class="col-lg-8 align-self-center">
            <br>
            <form action="{%url 'chatforum'%}" method="POST">
              {% csrf_token %}
              {%for field in form%}
                {{field.label_tag}}
                {{field}}<br>
              {%endfor%}
              <div class="button-container">
                <button style="background-color:gray" type="submit" class="btn">Post</button>
              </div><br>
            </form>

        </div>

    </div>

</div>


<!--**************************posts area***************************************-->
{% for p in posts %}
<div class="container-fluid">
    <div class="row justify-content-center">
        <div class="col-lg-8 align-self-center">
            <div class="card mt-4 border-dark main-post">
                <div class="card-body py-0">
                    <script src="{% static "JS/charforum.js" %}"></script>

                    <!-- Title -->
                    <h1 class="mt-4"><a href="{{p.get_absolute_url_post}}"style="color:black">{{ p.title }}</a></h1>
                    <!-- Author -->
                    <p class="lead">
                        by
                        {%if p.anonymous%}
                        Anonymous
                        {%else%}
                        <a href="{{p.get_absolute_url_user}}" style="color:black">{{ p.user }}</a>
                        {%endif%}
                    </p>
                    <hr>
                    <!-- Date/Time -->
                    <p>Posted on {{ p.time }}</p>
                    <hr>
                    <!-- Post Content -->
                    <p class="text-justify post-text">{{ p.content }}</p>
                    <hr class="my-2">
                    <!-- like/dislike buttons-->
                    <div class="d-flex justify-content-around">

                        <form id="like_form">
                            <input type="hidden" id="like_input" value="{{p.id}}">
                            <button type="submit" class="btn btn-dark btn-block like_button"><i class="fas fa-thumbs-up fa-lg "></i> like</button>
                        </form>
                        <form id="dislike_form">
                            <input type="hidden" name="dislike_input" value="{{p.id}}">
                            <button type="submit" class="btn btn-dark w-100 dislike_button"><i class="fas fa-thumbs-down fa-lg "></i> Dislike </button>
                        </form>


                    </div>
                    <hr class="mt-2">
                    <!-- Single Comment -->
                    <div class="media mb-4">
                        <!-- user img-->
                      <img class="d-flex mr-3 rounded-circle" src="{% static "images/MIDD-19.png" %}" height="50px" width="50px" alt="user-image">
                      <div class="media-body">
                        <h5 class="mt-0">Commenter Name</h5>
                        Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis. Fusce condimentum nunc ac nisi vulputate fringilla. Donec lacinia congue felis in faucibus.
                      </div>
                    </div>
                    <!-- Comments Form -->
                    <div class="card  mb-4">
                      <div class="card-body">
                        <form class="comment_form">
                            <div class="form-group">
                                <div class="d-flex">
                                    <img class="d-flex mr-3 rounded-circle" src="{% static "images/MIDD-19.png" %}" height="50px" width="50px" alt="user-image">
                                    <textarea placeholder="Write a comment..."class="form-control" rows="1"></textarea>
                                    <button type="submit" class="btn btn-dark">Comment</button>
                                </div>
                            </div>
                        </form>
                      </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div><br>

{%endfor%}

{% endblock %}




<!--PLEAE DONT DELETE -->
<!--
<div class="card promoting-card ">
    <div class="card-body d-flex flex-row">
        <!--**************please change here with user image******** -->
        <img src="{% static "images/MIDD-19.png" %}" class="rounded-circle mr-3" height="50px" width="50px" alt="user-image">
        <!-- Content -->
        <div>
            <!-- Title -->
            <h4 class="card-title font-weight-bold mb-2">{{ p.title }}</h4>
            <!-- Subtitle -->
            <p class="card-text"><i class="far fa-clock pr-2"></i>{{ p.time }}</p>
        </div>
    </div>
    <!-- Card content -->
    <div class="card-body">
        <div class="collapse-content">
            <!-- Text -->
            <p class="card-text collapse" id="collapseContent">{{ p.content }}</p>
            <!-- Button -->
            <a class="btn btn-flat red-text p-1 my-1 mr-0 mml-1 collapsed" data-toggle="collapse" href="#collapseContent" aria-expanded="false" aria-controls="collapseContent"></a>
            <i class="fas fa-heart text-muted float-right p-1 my-1 mr-3" data-toggle="tooltip" data-placement="top" title="I like it"></i>

        </div>
    </div>
</div>
</div>
